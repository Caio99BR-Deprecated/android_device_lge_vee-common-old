From 1398bd23d69e5a89d7235e3ec47428fb4701da66 Mon Sep 17 00:00:00 2001
From: xiaognol <317065820@qq.com>
Date: Mon, 29 Sep 2014 22:41:01 +0800
Subject: [PATCH 1/3] support dsds

Change-Id: I8041c286177b30675087d920986c4cbdfc7882c3
Signed-off-by: xiaognol <317065820@qq.com>
---
 .../android/internal/telephony/RILConstants.java   | 26 +++++++++++++---------
 1 file changed, 16 insertions(+), 10 deletions(-)

diff --git a/telephony/java/com/android/internal/telephony/RILConstants.java b/telephony/java/com/android/internal/telephony/RILConstants.java
index 09e760a..4a251f9 100644
--- a/telephony/java/com/android/internal/telephony/RILConstants.java
+++ b/telephony/java/com/android/internal/telephony/RILConstants.java
@@ -287,14 +287,19 @@ cat include/telephony/ril.h | \
     int RIL_REQUEST_ACKNOWLEDGE_INCOMING_GSM_SMS_WITH_PDU = 106;
     int RIL_REQUEST_STK_SEND_ENVELOPE_WITH_STATUS = 107;
     int RIL_REQUEST_VOICE_RADIO_TECH = 108;
-    int RIL_REQUEST_GET_CELL_INFO_LIST = 109;
-    int RIL_REQUEST_SET_UNSOL_CELL_INFO_LIST_RATE = 110;
-    int RIL_REQUEST_SET_INITIAL_ATTACH_APN = 111;
-    int RIL_REQUEST_IMS_REGISTRATION_STATE = 112;
-    int RIL_REQUEST_IMS_SEND_SMS = 113;
-    int RIL_REQUEST_GET_DATA_CALL_PROFILE = 114;
-    int RIL_REQUEST_SET_UICC_SUBSCRIPTION = 115;
-    int RIL_REQUEST_SET_DATA_SUBSCRIPTION = 116;
+    int RIL_REQUEST_GET_CELL_INFO_LIST = 20001;
+    int RIL_REQUEST_SET_UNSOL_CELL_INFO_LIST_RATE = 20002;
+    int RIL_REQUEST_SET_INITIAL_ATTACH_APN = 20003;
+    int RIL_REQUEST_IMS_REGISTRATION_STATE = 109;
+    int RIL_REQUEST_IMS_SEND_SMS = 110;
+    int RIL_REQUEST_GET_DATA_CALL_PROFILE = 111;
+    int RIL_REQUEST_SET_UICC_SUBSCRIPTION = 118;
+    int RIL_REQUEST_SET_DATA_SUBSCRIPTION = 119;
+    int RIL_REQUEST_GET_DATA_SUBSCRIPTION = 121;
+    int RIL_REQUEST_GET_UICC_SUBSCRIPTION = 120;
+    int RIL_REQUEST_SET_SUBSCRIPTION_MODE = 122;
+    int RIL_TETHERED_MODE_OFF = 0;
+    int RIL_TETHERED_MODE_ON = 1;
     int RIL_REQUEST_SIM_TRANSMIT_BASIC = 117;
     int RIL_REQUEST_SIM_OPEN_CHANNEL = 118;
     int RIL_REQUEST_SIM_CLOSE_CHANNEL = 119;
@@ -338,8 +343,9 @@ cat include/telephony/ril.h | \
     int RIL_UNSOL_EXIT_EMERGENCY_CALLBACK_MODE = 1033;
     int RIL_UNSOL_RIL_CONNECTED = 1034;
     int RIL_UNSOL_VOICE_RADIO_TECH_CHANGED = 1035;
-    int RIL_UNSOL_CELL_INFO_LIST = 1036;
-    int RIL_UNSOL_RESPONSE_IMS_NETWORK_STATE_CHANGED = 1037;
+    int RIL_UNSOL_CELL_INFO_LIST = 20000;
+    int RIL_UNSOL_RESPONSE_IMS_NETWORK_STATE_CHANGED = 1036;
+    int RIL_UNSOL_TETHERED_MODE_STATE_CHANGED = 1037;
     int RIL_UNSOL_ON_SS = 1038;
     int RIL_UNSOL_STK_CC_ALPHA_NOTIFY = 1039;
     int RIL_UNSOL_UICC_SUBSCRIPTION_STATUS_CHANGED = 1040;
-- 
1.9.1


From 0ec71fec0423c3bd1c708500285b29846a15091f Mon Sep 17 00:00:00 2001
From: xiaognol <317065820@qq.com>
Date: Tue, 30 Sep 2014 00:01:13 +0800
Subject: [PATCH 2/3] update RILCOnstants again

Change-Id: Ib878bc490df8ddd869adbb520df5a68da7a6948a
Signed-off-by: xiaognol <317065820@qq.com>
---
 telephony/java/com/android/internal/telephony/RILConstants.java | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/telephony/java/com/android/internal/telephony/RILConstants.java b/telephony/java/com/android/internal/telephony/RILConstants.java
index 4a251f9..f994ba4 100644
--- a/telephony/java/com/android/internal/telephony/RILConstants.java
+++ b/telephony/java/com/android/internal/telephony/RILConstants.java
@@ -301,10 +301,10 @@ cat include/telephony/ril.h | \
     int RIL_TETHERED_MODE_OFF = 0;
     int RIL_TETHERED_MODE_ON = 1;
     int RIL_REQUEST_SIM_TRANSMIT_BASIC = 117;
-    int RIL_REQUEST_SIM_OPEN_CHANNEL = 118;
-    int RIL_REQUEST_SIM_CLOSE_CHANNEL = 119;
-    int RIL_REQUEST_SIM_TRANSMIT_CHANNEL = 120;
-    int RIL_REQUEST_SIM_GET_ATR = 121;
+    int RIL_REQUEST_SIM_OPEN_CHANNEL = 124;
+    int RIL_REQUEST_SIM_CLOSE_CHANNEL = 125;
+    int RIL_REQUEST_SIM_TRANSMIT_CHANNEL = 126;
+    int RIL_REQUEST_SIM_GET_ATR = 127;
 
     int RIL_UNSOL_RESPONSE_BASE = 1000;
     int RIL_UNSOL_RESPONSE_RADIO_STATE_CHANGED = 1000;
-- 
1.9.1


From ba619141aeda048df917c6135339998e92507a04 Mon Sep 17 00:00:00 2001
From: fonz93 <fonz993@hotmail.it>
Date: Sat, 2 Aug 2014 00:38:32 +0200
Subject: [PATCH 3/3] Hack for "no network" bug

---
 .../src/com/android/systemui/statusbar/policy/NetworkController.java    | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/policy/NetworkController.java b/packages/SystemUI/src/com/android/systemui/statusbar/policy/NetworkController.java
index cd2543b..ea74fb9 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/policy/NetworkController.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/policy/NetworkController.java
@@ -1214,6 +1214,8 @@ public class NetworkController extends BroadcastReceiver implements DemoMode {
                     // Tablets, basically
                     mobileLabel = "";
                 }
+            } else if (hasService() || emergencyOnly) {
+                    mobileLabel = mNetworkName;
             } else {
                 mobileLabel
                     = mContext.getString(R.string.status_bar_settings_signal_meter_disconnected);
-- 
1.9.1

